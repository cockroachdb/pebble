define
L1
  a@1#10,SET:va1
  b#10,SET:vb
  e#10,SET:ve
L2
  a#5,SET:va
  a@1#5,SET:va1b
  b@2#5,SET:vb2
  c#5,DEL:
  d#5,SET:vd
L3
  c#1,SET:vc
----
L1:
  000004:[a@1#10,SET-e#10,SET] seqnums:[#10-#10] points:[a@1#10,SET-e#10,SET] size:708
L2:
  000005:[a#5,SET-d#5,SET] seqnums:[#5-#5] points:[a#5,SET-d#5,SET] size:866
L3:
  000006:[c#1,SET-c#1,SET] seqnums:[#1-#1] points:[c#1,SET-c#1,SET] size:679

merging-iter depth=2
seek-ge a
next
next
next
next
next
next
next
----
a#5,SET:va
a@1#10,SET:va1
a@1#5,SET:va1b
b#10,SET:vb
b@2#5,SET:vb2
c#5,DEL:
c#1,SET:vc
d#5,SET:vd
https://raduberinde.github.io/treesteps/decode.html#eNrsms1q20AQx-99imF9SUAQ2al7WCikaU0phFzSWxWKZE2SpfLWSNtSKIWQQy-99KBjn6EPpScpkhW0K-1ahspypa5Ptma1O_r950vgr-TSXyGhRGAiQl_4JyJGTASuk5MVxreM375nAmM6mxGHXAlc5-sTQt8RxplgfpRfRvzwegEfOZS3vBEYQyL8WGCo2CP8jFFhvWGcJXedmuXDpQWX-EWYfXu0avfW3Wp3tju37ny9yZUiT6QFHocs_ZWl91l6Dy-KXw8AAFmalheroy6myurzltWzwv5oeOlxAOPaU48TR_YLIPv-EzaZdOQR3yMOuMdj9la_BzwH_2w6mbrO1eJttUXp2wPcsAgpuPnnad384_e_RYDuJNj-ns9MeDJvxzs3HD9gYHSniNgXEaMcy8m0lANMRz9TjfnBu-BtaH2H_hpWjFM4p7KlkkCXffsRoxGFe9GE1uiaovWv2efd6OjYcracd6nKm6cou10X1bhn_ro-XYnRwH4QPZpkRxn5FvbQYNcSKehm3B2rBpoiqZR9xVbJEdjI77rBWtKW9NZhJjibDXSYCcyjTKAv931poWE60s5qQQ8DdC11sKPxZaT8NWVRLvWqrRIDbdR33FQtaUt6-_iynMydV4uLwdUX1W9ZCdnSvw4NniONd0vZUtZXlHCgr0PVgaoKsiuHUCH8LzqopWwp90u5lv7eJ9c9XXIWFV-wpViExpeb8KBjYD-AW_8Gcf3tyZ8AAAD__wPgWaU=

# This test verifies that the level iterators skips files 8:[d1-d2], 9:[e1-e2]
# altogether. Ideally, we would skip 7:[c1-c2] as well, but we currently need to
# read a key that's past the tombstone start before we consider the tombstone.
define
L1
  c#10,RANGEDEL:f
L2
  a1#1,SET:va
  a2#1,SET:va
L2
  b1#1,SET:va
  b2#1,SET:va
L2
  c1#1,SET:va
  c2#1,SET:va
L2
  d1#1,SET:va
  d2#1,SET:va
L2
  e1#1,SET:va
  e2#1,SET:va
L2
  f1#1,SET:va
  f2#1,SET:va
----
L1:
  000004:[c#10,RANGEDEL-f#inf,RANGEDEL] seqnums:[#10-#10] points:[c#10,RANGEDEL-f#inf,RANGEDEL] size:676
L2:
  000005:[a1#1,SET-a2#1,SET] seqnums:[#1-#1] points:[a1#1,SET-a2#1,SET] size:697
  000006:[b1#1,SET-b2#1,SET] seqnums:[#1-#1] points:[b1#1,SET-b2#1,SET] size:697
  000007:[c1#1,SET-c2#1,SET] seqnums:[#1-#1] points:[c1#1,SET-c2#1,SET] size:697
  000008:[d1#1,SET-d2#1,SET] seqnums:[#1-#1] points:[d1#1,SET-d2#1,SET] size:697
  000009:[e1#1,SET-e2#1,SET] seqnums:[#1-#1] points:[e1#1,SET-e2#1,SET] size:697
  000010:[f1#1,SET-f2#1,SET] seqnums:[#1-#1] points:[f1#1,SET-f2#1,SET] size:697

merging-iter depth=2
first
next
next
next
next
next
next
----
a1#1,SET:va
a2#1,SET:va
b1#1,SET:va
b2#1,SET:va
f1#1,SET:va
f2#1,SET:va
.
https://raduberinde.github.io/treesteps/decode.html#eNrsmcFq20AQhu99imFzcUAl1raNYaGHhLqhEHyoe6tCkZTZZKm8NtK2FEIg5NBLLz3o2GfoQ-lJimS7lpSVbFVyHJf1yfZoZvx_-mcH5BsycidIGFEYqUtXuUcqRIwUzqKjCYZXQl59EgpDNhgQi4wVztLrI8I-EiGFEm5ALPJWhJGCqYRFxjuFIUTKDRVe5sMBfsUgC3IhRXTdJJovnYuP8FtN52VUW1qXaiprg2PEz2fDf8v97zBfzOcgm4HcBY6EJP6VxHdJfAcn2ad7AIAkjhdfrlqd21l8GTh1JEDltdSRxMp3Aki-_4RsMnqHT67tPajpxIvUVCID_zlnN70Du2-9PxmdDd8Mzw9v1_3GQh94Df6BkPxv_ioblv24CJBBP329LId__N6SZNap5q2qKgN17QPbGg8_LLN0LV8Vg2nDGjTFommpa3RnMBGSwSkrhFYAq-7r7nGyMqEqt7Tmlx40C2cZZoZZ3fzOZaeTRjsbX13NB1Tp3lGlO3eiYWaY6afX22D5HjecXq9693p7dyZ6rffIcUsnGmaGWdX00i1Mb_Xu9fbuTPTozp1omBlm-un1N9i9g1YotcweBWhJKu_yoQnzW--XQUuH-vr9wp-uQ_0G-2X-fLXnEO4QC2h2A9d71e639Cqv82o12g3s53zp91_4UgTZGyyh4W3t1Ex5kWbZWVzrrGYPUh9bkZHRgYyyRWjHA1es-UAo7UIo3fn9MjIaylh3UtYaSneubuvPn4vbZ38CAAD__xYptfg=

define
L1
  b@20#5,SET:b20
  b@10#5,SET:b10
  c@20#5,SET:c20
  c@10#5,SET:c10
  d@20#5,SET:d20
  d@10#5,SET:d10
L2
  a#4,RANGEDEL:c1
L3
  b@25#3,SET:b25
  b@15#3,SET:b15
  b@5#3,SET:b5
  c@25#3,SET:c25
  c@15#3,SET:c15
  c@5#3,SET:c5
  d@25#3,SET:d25
  d@15#3,SET:d15
  d@5#3,SET:d5
----
L1:
  000004:[b@20#5,SET-d@10#5,SET] seqnums:[#5-#5] points:[b@20#5,SET-d@10#5,SET] size:839
L2:
  000005:[a#4,RANGEDEL-c1#inf,RANGEDEL] seqnums:[#4-#4] points:[a#4,RANGEDEL-c1#inf,RANGEDEL] size:678
L3:
  000006:[b@25#3,SET-d@5#3,SET] seqnums:[#3-#3] points:[b@25#3,SET-d@5#3,SET] size:873

# TODO(radu): the InterleavingIter returns `b-b\x00:{(#4,RANGEDEL)}` instead of
# returning a tombstone up to d; this seems suspicious.
merging-iter depth=2
seek-prefix-ge b
seek-prefix-ge c try-seek-using-next
seek-prefix-ge d try-seek-using-next
----
b@20#5,SET:b20
c@20#5,SET:c20
d@25#3,SET:d25
https://raduberinde.github.io/treesteps/decode.html#eNrsmMFu2kwQx-_fU4yWC0iOYiB8h5WQGlIUVYpQ1fRWR5W9HpJVzYLsbYUURYo49NJLDz72GfpQfpLKixsM2PGSmGIkczF4xuv_zG9md8Q9GdkTJJRIDKRrS_tU-oiBxFlwOkH_lovbz1yiT9udHjHItcRZ_EBA6CfCBZfc9uLbiF_e-zjm88shTAUkT76T6EMgbV-im-Hl4Tf0lM-YCx7c6TuNcC61V0iL0XSrNb_CKVP7zbJ2VN2kHCwBUfgrCh-j8BHO1a8FAEAUhsnN1Suv2mvegwLvjrL_NVxYAiDXt2sJYqR1AUTff0I6sqZFHIsYkFzM1rFLX8BM2Sk4u4Wi8QLog_OmYzZ6xvXw42q9JIoFjLmHFMz4c7Zp_vH7iHJFtbiXE_wC5HTiBHIqkIJz4ljW3DTpfbNxZnw4H10O3w6vWg9F2dKE1-Bi_LTq8zH0cmLYO5I7tGcw4YLCgGYKzmOWVZp7oUfz8lgqzPhgaSpqapFKo8vaGFYcM9AcnGHp0A6PhC2RqEu7VVM4NgrsxRQ0hEAf2D6O7ppa5XqHnbDyZojtKqrYQVRAbkDZczPEJj32z2YIpjdDvA7m0wzBqjhDFO9Q6Q5kuh3IjrYDD4_EXSJxc_fBmkKlKbgvpqAhBPrg7n2GqKkdqHe0R4KtorC-mmaXCe6pL1gnttx_twpzYiad2Wt0k9AgT_j_68ZY9s4ANl-2TuOCbhnzaLjVpEG3U5lXvLsl-ubhvz8BAAD___cnVo4=

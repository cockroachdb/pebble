example
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0       216B |    101  102B |    101   103 |   114B   114B |   104B |    112  104B |   1  4.31
    1       416B |    201  202B |    201   203 |   214B   214B |   204B |    212  204B |   2  4.16
    2       616B |    301  302B |    301   303 |   314B   314B |   304B |    312  304B |   3  4.11
    3       816B |    401  402B |    401   403 |   414B   414B |   404B |    412  404B |   4  4.08
    4        1KB |    501  502B |    501   503 |   514B   514B |   504B |    512  504B |   5  4.06
    5      1.2KB |    601  602B |    601   603 |   614B   614B |   604B |    612  604B |   6  4.05
    6      1.4KB |    701  702B |    701   703 |   714B   714B |   704B |    712  704B |   7  4.05
total      5.6KB |   2.8K 2.7KB |   2.8K  2.8K |  2.8KB  2.8KB |  2.8KB |   2.9K 2.8KB |  28  5.04

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |  1.10  2.10  0.30 |    113  106B |  104B  104B  104B |   107B  117B |    221   217B   231B
    1 |  1.20  2.20  0.60 |    213  206B |  204B  204B  204B |   207B  217B |    421   417B   431B
    2 |  1.30  2.30  0.90 |    313  306B |  304B  304B  304B |   307B  317B |    621   617B   631B
    3 |  1.40  2.40  1.20 |    413  406B |  404B  404B  404B |   407B  417B |    821   817B   831B
    4 |  1.50  2.50  1.50 |    513  506B |  504B  504B  504B |   507B  517B |     1K    1KB    1KB
    5 |  1.60  2.60  1.80 |    613  606B |  604B  604B  604B |   607B  617B |   1.2K  1.2KB  1.2KB
    6 |     -  2.70  2.10 |    713  706B |  704B  704B  704B |   707B  717B |   1.4K  1.4KB  1.4KB
total |     -     -     - |   2.9K 2.8KB | 2.8KB 2.8KB 2.8KB |  2.8KB 2.9KB |   5.7K  8.4KB  5.7KB

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |      10      11       12    14    15    16       17    13     18    19

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
 22 (24B) |   25B: 26B |      4.0% |         8 |   12 (2GB) |   5 (13MB) |        51 |      4 (6B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
   100 (1GB) |       66.7% |    180 (1MB) |       48.7% |        47.4% |          21 |           4

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |        live |     zombie |  total |      refed
--------------+------------+-----------------------+-------------+------------+--------+-----------
   31 pending |    1 (2MB) |  18 (17MB local:30MB) | 1.2K (15GB) |  14 (30MB) |   14GB | 79% (11GB)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
         15KB |           9KB |            4KB |             2KB |             3KB |           5KB

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
              6GB |           2 (1MB) |           3 (3KB) |                 4 |                5!!

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
             123 |              456 |                    789!! |             1MB |             2MB

COMPRESSION
    algorithm |  none  snappy  minlz  zstd  unknown
on disk bytes | 100MB     1GB    1GB  10GB    500MB
           CR |             2      3     5        ?
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
----
----

init
----

batch
set a 1
----

iter-new a category=a
----

flush
----
L0.0:
  000005:[a#10,SET-a#10,SET]

# iter b references both a memtable and sstable 5.

iter-new b category=b
----

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0       747B |      1  747B |      0     0 |     0B     0B |    28B |      0    0B |   1 26.68
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
total       747B |      1  747B |      0     0 |     0B     0B |    28B |      0    0B |   1 27.68

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.25  0.25 |      0    0B |    0B    0B    0B |     0B    0B |      1   747B     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
total |     -     -     - |      0    0B |    0B    0B    0B |     0B    0B |      1   775B     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       0       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   17B: 28B |     64.7% |         1 |  1 (256KB) |  1 (256KB) |        45 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
    2 (853B) |        0.0% |     1 (296B) |        0.0% |         0.0% |           1 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes |  36B    127B
           CR |         1.38
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  1     1B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  1     1B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
----
----

disk-usage
----
3.6KB

batch
set b 2
----

flush
----
L0.0:
  000005:[a#10,SET-a#10,SET]
  000007:[b#11,SET-b#11,SET]

# iter c references both a memtable and sstables 5 and 7.

iter-new c category=c
----

# Two files, since the target file size is set to 50.

compact a-z
----
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0         0B |      0    0B |      0     0 |     0B     0B |    64B |      0    0B |   0 23.34
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      1.5KB |      2 1.5KB |      0     0 |     0B     0B |  1.5KB |      0    0B |   1  1.00
total      1.5KB |      2 1.5KB |      0     0 |     0B     0B |    64B |      0    0B |   1 47.59

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      2  1.5KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |   230B    0B |      2  1.5KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |   230B    0B |      4    3KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       1       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   34B: 64B |     88.2% |         2 |  1 (256KB) |  2 (512KB) |        98 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
    2 (853B) |       33.3% |     2 (592B) |       66.7% |         0.0% |           2 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) | 2 (1.5KB local:1.5KB) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes |  72B    248B
           CR |         1.41
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:230 BlockBytesInCache:115 BlockReadDuration:10ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

disk-usage
----
6.0KB

# Closing iter a will release one of the zombie memtables.

iter-close a
----

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0         0B |      0    0B |      0     0 |     0B     0B |    64B |      0    0B |   0 23.34
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      1.5KB |      2 1.5KB |      0     0 |     0B     0B |  1.5KB |      0    0B |   1  1.00
total      1.5KB |      2 1.5KB |      0     0 |     0B     0B |    64B |      0    0B |   1 47.59

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      2  1.5KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |   230B    0B |      2  1.5KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |   230B    0B |      4    3KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       1       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   34B: 64B |     88.2% |         2 |  1 (256KB) |  2 (512KB) |        98 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
    2 (853B) |       33.3% |     2 (592B) |       66.7% |         0.0% |           2 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) | 2 (1.5KB local:1.5KB) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes |  72B    248B
           CR |         1.41
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:230 BlockBytesInCache:115 BlockReadDuration:10ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

# Closing iter c will release one of the zombie sstables. The other
# zombie sstable is still referenced by iter b.

iter-close c
----

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0         0B |      0    0B |      0     0 |     0B     0B |    64B |      0    0B |   0 23.34
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      1.5KB |      2 1.5KB |      0     0 |     0B     0B |  1.5KB |      0    0B |   1  1.00
total      1.5KB |      2 1.5KB |      0     0 |     0B     0B |    64B |      0    0B |   1 47.59

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      2  1.5KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |   230B    0B |      2  1.5KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |   230B    0B |      4    3KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       1       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   34B: 64B |     88.2% |         2 |  1 (256KB) |  2 (512KB) |        98 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
    2 (853B) |       33.3% |     1 (296B) |       66.7% |         0.0% |           1 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |   1 (747B local:747B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes |  72B    248B
           CR |         1.41
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:230 BlockBytesInCache:115 BlockReadDuration:10ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

disk-usage
----
5.3KB

# Closing iter b will release the last zombie sstable and the last zombie memtable.

iter-close b
----

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0         0B |      0    0B |      0     0 |     0B     0B |    64B |      0    0B |   0 23.34
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      1.5KB |      2 1.5KB |      0     0 |     0B     0B |  1.5KB |      0    0B |   1  1.00
total      1.5KB |      2 1.5KB |      0     0 |     0B     0B |    64B |      0    0B |   1 47.59

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      2  1.5KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |   230B    0B |      2  1.5KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |   230B    0B |      4    3KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       1       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   34B: 64B |     88.2% |         2 |  1 (256KB) |  1 (256KB) |        98 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |       33.3% |       0 (0B) |       66.7% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes |  72B    248B
           CR |         1.41
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:230 BlockBytesInCache:115 BlockReadDuration:10ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

disk-usage
----
4.5KB

additional-metrics
----
block bytes written:
 __level___data-block__value-block
      0         168B           0B
      1           0B           0B
      2           0B           0B
      3           0B           0B
      4           0B           0B
      5           0B           0B
      6         162B           0B

batch
set c@20 c20
set c@19 c19
set c@18 c18
set c@17 c17
set c@16 c16
set c@15 c15
set c@14 c14
----

flush
----
L0.0:
  000011:[c@20#12,SET-c@20#12,SET]
  000013:[c@19#13,SET-c@19#13,SET]
  000015:[c@18#14,SET-c@18#14,SET]
  000017:[c@17#15,SET-c@17#15,SET]
  000019:[c@16#16,SET-c@16#16,SET]
  000021:[c@15#17,SET-c@15#17,SET]
  000023:[c@14#18,SET-c@14#18,SET]
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
Blob files:
  B000012 physical:{000012 size:[293 (293B)] vals:[3 (3B)]}
  B000014 physical:{000014 size:[293 (293B)] vals:[3 (3B)]}
  B000016 physical:{000016 size:[293 (293B)] vals:[3 (3B)]}
  B000018 physical:{000018 size:[293 (293B)] vals:[3 (3B)]}
  B000020 physical:{000020 size:[293 (293B)] vals:[3 (3B)]}
  B000022 physical:{000022 size:[293 (293B)] vals:[3 (3B)]}
  B000024 physical:{000024 size:[293 (293B)] vals:[3 (3B)]}

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0      7.8KB |      7 5.8KB |      0     0 |    2KB     0B |   165B |      0    0B |   1 70.06
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      1.5KB |      2 1.5KB |      0     0 |     0B     0B |  1.5KB |      0    0B |   1  1.00
total      9.3KB |      9 7.3KB |      0     0 |    2KB     0B |   165B |      0    0B |   2 80.08

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.25  0.25 |      0    0B |    0B    0B    0B |     0B    0B |      9  7.3KB    4KB
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |   230B    0B |      2  1.5KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |   230B    0B |     11  8.9KB    4KB

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       1       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) | 116B: 165B |     42.2% |         3 |  1 (256KB) |  1 (256KB) |       281 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |       33.3% |       0 (0B) |       66.7% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |    7 (2KB) |     0 (0B) |    21B | 100% (21B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
            9.3KB |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 464B   1.3KB
           CR |         1.39
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  7     28B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  2  7     21B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:230 BlockBytesInCache:115 BlockReadDuration:10ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

additional-metrics
----
block bytes written:
 __level___data-block__value-block
      0         903B           0B
      1           0B           0B
      2           0B           0B
      3           0B           0B
      4           0B           0B
      5           0B           0B
      6         162B           0B

compact a-z
----
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
  000025:[c@20#0,SET-c@20#0,SET]
  000026:[c@19#0,SET-c@19#0,SET]
  000027:[c@18#0,SET-c@18#0,SET]
  000028:[c@17#0,SET-c@17#0,SET]
  000029:[c@16#0,SET-c@16#0,SET]
  000030:[c@15#0,SET-c@15#0,SET]
  000031:[c@14#0,SET-c@14#0,SET]
Blob files:
  B000012 physical:{000012 size:[293 (293B)] vals:[3 (3B)]}
  B000014 physical:{000014 size:[293 (293B)] vals:[3 (3B)]}
  B000016 physical:{000016 size:[293 (293B)] vals:[3 (3B)]}
  B000018 physical:{000018 size:[293 (293B)] vals:[3 (3B)]}
  B000020 physical:{000020 size:[293 (293B)] vals:[3 (3B)]}
  B000022 physical:{000022 size:[293 (293B)] vals:[3 (3B)]}
  B000024 physical:{000024 size:[293 (293B)] vals:[3 (3B)]}

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0         0B |      0    0B |      0     0 |     0B     0B |   165B |      0    0B |   0 70.06
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      9.3KB |      9 7.2KB |      0     0 |    2KB     0B |  7.3KB |      0    0B |   1  1.00
total      9.3KB |      9 7.2KB |      0     0 |    2KB     0B |   165B |      0    0B |   1 116.1

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      9  7.3KB    4KB
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |  1.2KB    0B |      9  7.2KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |  1.2KB    0B |     18   15KB    4KB

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       2       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) | 116B: 165B |     42.2% |         3 |  1 (256KB) |  1 (256KB) |       281 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |       10.0% |       0 (0B) |       55.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |    7 (2KB) |     0 (0B) |    21B | 100% (21B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 464B   1.3KB
           CR |         1.37
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  9     30B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  2  7     21B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:1182 BlockBytesInCache:115 BlockReadDuration:80ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

additional-metrics
----
block bytes written:
 __level___data-block__value-block
      0         903B           0B
      1           0B           0B
      2           0B           0B
      3           0B           0B
      4           0B           0B
      5           0B           0B
      6         869B           0B

# Flushable ingestion metrics. This requires there be data in a memtable that
# would overlap with the ingested table(s). Delayed flushes are disabled here to
# prevent the ingestion from immediately triggering a flush of the memtable.
# Instead, we wish to flush manually _after_ the ingestion of the two tables has
# completed, linking the two tables into the flushable queue.

delay-flush
enable
----

batch
set d d
set e e
set f f
----

build ext1.sst
set d d
----

build ext2.sst
set e e
----

ingest ext1.sst ext2.sst
----

build ext3.sst
set f f
----

ingest ext3.sst
----

delay-flush
disable
----

flush
----
L0.1:
  000032:[d#22,SET-d#22,SET]
  000033:[e#23,SET-e#23,SET]
  000036:[f#24,SET-f#24,SET]
L0.0:
  000040:[d#19,SET-d#19,SET]
  000041:[e#20,SET-e#20,SET]
  000042:[f#21,SET-f#21,SET]
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
  000025:[c@20#0,SET-c@20#0,SET]
  000026:[c@19#0,SET-c@19#0,SET]
  000027:[c@18#0,SET-c@18#0,SET]
  000028:[c@17#0,SET-c@17#0,SET]
  000029:[c@16#0,SET-c@16#0,SET]
  000030:[c@15#0,SET-c@15#0,SET]
  000031:[c@14#0,SET-c@14#0,SET]
Blob files:
  B000012 physical:{000012 size:[293 (293B)] vals:[3 (3B)]}
  B000014 physical:{000014 size:[293 (293B)] vals:[3 (3B)]}
  B000016 physical:{000016 size:[293 (293B)] vals:[3 (3B)]}
  B000018 physical:{000018 size:[293 (293B)] vals:[3 (3B)]}
  B000020 physical:{000020 size:[293 (293B)] vals:[3 (3B)]}
  B000022 physical:{000022 size:[293 (293B)] vals:[3 (3B)]}
  B000024 physical:{000024 size:[293 (293B)] vals:[3 (3B)]}

# We expect the ingested-as-flushable count to be three (one for each ingested
# table). The unknown category in the iter category stats is because of a gap
# in instrumentation for checking overlap with an existing flushable ingest,
# where we open and close a point iterator when constructing a range-del
# iterator.
metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0      4.4KB |      6 4.4KB |      0     0 |     0B     0B |   211B |      3 2.2KB |   2 65.41
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      9.3KB |      9 7.2KB |      0     0 |    2KB     0B |  7.3KB |      0    0B |   1  1.00
total       14KB |     15  12KB |      0     0 |    2KB     0B |  2.4KB |      3 2.2KB |   3  9.69

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.50  0.50 |      0    0B |    0B    0B    0B |     0B    0B |     12  9.5KB    4KB
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |  1.2KB    0B |      9  7.2KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |  1.2KB    0B |     21   19KB    4KB

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       2       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) | 176B: 211B |     19.9% |         8 |    1 (1MB) |    1 (1MB) |       387 |   2 (2.2KB)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
   6 (2.5KB) |        6.9% |       0 (0B) |       55.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |    7 (2KB) |     0 (0B) |    21B | 100% (21B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
             14KB |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 680B     2KB
           CR |         1.38
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  6     6B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  6     6B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  9     30B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  2  7     21B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:1182 BlockBytesInCache:115 BlockReadDuration:80ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

batch
set g g
set h h
set i i
set j j
set k k
set l l
set m m
----

flush
----
L0.1:
  000032:[d#22,SET-d#22,SET]
  000033:[e#23,SET-e#23,SET]
  000036:[f#24,SET-f#24,SET]
L0.0:
  000040:[d#19,SET-d#19,SET]
  000041:[e#20,SET-e#20,SET]
  000042:[f#21,SET-f#21,SET]
  000044:[g#25,SET-g#25,SET]
  000045:[h#26,SET-h#26,SET]
  000046:[i#27,SET-i#27,SET]
  000047:[j#28,SET-j#28,SET]
  000048:[k#29,SET-k#29,SET]
  000049:[l#30,SET-l#30,SET]
  000050:[m#31,SET-m#31,SET]
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
  000025:[c@20#0,SET-c@20#0,SET]
  000026:[c@19#0,SET-c@19#0,SET]
  000027:[c@18#0,SET-c@18#0,SET]
  000028:[c@17#0,SET-c@17#0,SET]
  000029:[c@16#0,SET-c@16#0,SET]
  000030:[c@15#0,SET-c@15#0,SET]
  000031:[c@14#0,SET-c@14#0,SET]
Blob files:
  B000012 physical:{000012 size:[293 (293B)] vals:[3 (3B)]}
  B000014 physical:{000014 size:[293 (293B)] vals:[3 (3B)]}
  B000016 physical:{000016 size:[293 (293B)] vals:[3 (3B)]}
  B000018 physical:{000018 size:[293 (293B)] vals:[3 (3B)]}
  B000020 physical:{000020 size:[293 (293B)] vals:[3 (3B)]}
  B000022 physical:{000022 size:[293 (293B)] vals:[3 (3B)]}
  B000024 physical:{000024 size:[293 (293B)] vals:[3 (3B)]}

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0      9.5KB |     13 9.5KB |      0     0 |     0B     0B |   277B |      3 2.2KB |   2 68.70
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      9.3KB |      9 7.2KB |      0     0 |    2KB     0B |  7.3KB |      0    0B |   1  1.00
total       19KB |     22  17KB |      0     0 |    2KB     0B |  2.5KB |      3 2.2KB |   3 11.54

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.50  0.50 |      0    0B |    0B    0B    0B |     0B    0B |     19   15KB    4KB
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |  1.2KB    0B |      9  7.2KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |  1.2KB    0B |     28   24KB    4KB

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       2       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) | 223B: 277B |     24.2% |         9 |    1 (1MB) |    1 (1MB) |       500 |   2 (2.2KB)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
   6 (2.5KB) |        6.9% |       0 (0B) |       55.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |    7 (2KB) |     0 (0B) |    21B | 100% (21B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
             19KB |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 932B   2.9KB
           CR |         1.38
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  13    13B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  13    13B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  9     30B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  2  7     21B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:1182 BlockBytesInCache:115 BlockReadDuration:80ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

build ext1
set z z
----

ingest-and-excise ext1 excise=i-k
----

# sstable 29, 30 were created as virtual when i-k was excised.

# TODO(sumeer): the above comment is wrong. sstables 46 and 47 were fully
# excised, which is why the tiered histogram stats drop from 13 to 11 for L0.
lsm
----
L0.1:
  000032:[d#22,SET-d#22,SET]
  000033:[e#23,SET-e#23,SET]
  000036:[f#24,SET-f#24,SET]
L0.0:
  000040:[d#19,SET-d#19,SET]
  000041:[e#20,SET-e#20,SET]
  000042:[f#21,SET-f#21,SET]
  000044:[g#25,SET-g#25,SET]
  000045:[h#26,SET-h#26,SET]
  000048:[k#29,SET-k#29,SET]
  000049:[l#30,SET-l#30,SET]
  000050:[m#31,SET-m#31,SET]
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
  000025:[c@20#0,SET-c@20#0,SET]
  000026:[c@19#0,SET-c@19#0,SET]
  000027:[c@18#0,SET-c@18#0,SET]
  000028:[c@17#0,SET-c@17#0,SET]
  000029:[c@16#0,SET-c@16#0,SET]
  000030:[c@15#0,SET-c@15#0,SET]
  000031:[c@14#0,SET-c@14#0,SET]
  000051:[z#33,SET-z#33,SET]
Blob files:
  B000012 physical:{000012 size:[293 (293B)] vals:[3 (3B)]}
  B000014 physical:{000014 size:[293 (293B)] vals:[3 (3B)]}
  B000016 physical:{000016 size:[293 (293B)] vals:[3 (3B)]}
  B000018 physical:{000018 size:[293 (293B)] vals:[3 (3B)]}
  B000020 physical:{000020 size:[293 (293B)] vals:[3 (3B)]}
  B000022 physical:{000022 size:[293 (293B)] vals:[3 (3B)]}
  B000024 physical:{000024 size:[293 (293B)] vals:[3 (3B)]}

# There should be 2 backing tables. Note that tiny sstables have inaccurate
# virtual sstable sizes.
metrics-value
num-backing
backing-size
num-virtual
num-virtual 0
virtual-size
----
0
0B
0
0
0B

metrics zero-cache-hits-misses
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0        8KB |     11   8KB |      0     0 |     0B     0B |   277B |      3 2.2KB |   2 68.70
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6       10KB |     10   8KB |      0     0 |    2KB     0B |  7.3KB |      1  744B |   1  1.00
total       18KB |     21  16KB |      0     0 |    2KB     0B |  3.2KB |      4 2.9KB |   3  9.13

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.50  0.50 |      0    0B |    0B    0B    0B |     0B    0B |     19   15KB    4KB
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |  1.2KB    0B |      9  7.2KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |  1.2KB    0B |     28   25KB    4KB

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       2       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) | 223B: 277B |     24.2% |         9 |    1 (1MB) |    1 (1MB) |       500 |   2 (2.2KB)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |        0.0% |       0 (0B) |        0.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |    7 (2KB) |     0 (0B) |    21B | 100% (21B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
             18KB |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 896B   2.7KB
           CR |         1.38
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  11    11B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  11    11B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  10    31B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  2  7     21B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:1182 BlockBytesInCache:115 BlockReadDuration:80ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

# Virtualize a virtual sstable.
build ext1
set zz zz
----

ingest-and-excise ext1 excise=k-l
----

# sstable 32 created when k-l was excised, but no new backing file should be
# created.
lsm
----
L0.1:
  000032:[d#22,SET-d#22,SET]
  000033:[e#23,SET-e#23,SET]
  000036:[f#24,SET-f#24,SET]
L0.0:
  000040:[d#19,SET-d#19,SET]
  000041:[e#20,SET-e#20,SET]
  000042:[f#21,SET-f#21,SET]
  000044:[g#25,SET-g#25,SET]
  000045:[h#26,SET-h#26,SET]
  000049:[l#30,SET-l#30,SET]
  000050:[m#31,SET-m#31,SET]
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
  000025:[c@20#0,SET-c@20#0,SET]
  000026:[c@19#0,SET-c@19#0,SET]
  000027:[c@18#0,SET-c@18#0,SET]
  000028:[c@17#0,SET-c@17#0,SET]
  000029:[c@16#0,SET-c@16#0,SET]
  000030:[c@15#0,SET-c@15#0,SET]
  000031:[c@14#0,SET-c@14#0,SET]
  000051:[z#33,SET-z#33,SET]
  000052:[zz#35,SET-zz#35,SET]
Blob files:
  B000012 physical:{000012 size:[293 (293B)] vals:[3 (3B)]}
  B000014 physical:{000014 size:[293 (293B)] vals:[3 (3B)]}
  B000016 physical:{000016 size:[293 (293B)] vals:[3 (3B)]}
  B000018 physical:{000018 size:[293 (293B)] vals:[3 (3B)]}
  B000020 physical:{000020 size:[293 (293B)] vals:[3 (3B)]}
  B000022 physical:{000022 size:[293 (293B)] vals:[3 (3B)]}
  B000024 physical:{000024 size:[293 (293B)] vals:[3 (3B)]}

metrics-value
num-backing
backing-size
num-virtual
num-virtual 0
virtual-size
----
0
0B
0
0
0B

compact a-z
----
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
  000025:[c@20#0,SET-c@20#0,SET]
  000026:[c@19#0,SET-c@19#0,SET]
  000027:[c@18#0,SET-c@18#0,SET]
  000028:[c@17#0,SET-c@17#0,SET]
  000029:[c@16#0,SET-c@16#0,SET]
  000030:[c@15#0,SET-c@15#0,SET]
  000031:[c@14#0,SET-c@14#0,SET]
  000053:[d#0,SET-d#0,SET]
  000054:[e#0,SET-e#0,SET]
  000055:[f#0,SET-f#0,SET]
  000056:[g#0,SET-g#0,SET]
  000057:[h#0,SET-h#0,SET]
  000058:[l#0,SET-l#0,SET]
  000059:[m#0,SET-m#0,SET]
  000051:[z#33,SET-z#33,SET]
  000052:[zz#35,SET-zz#35,SET]
Blob files:
  B000012 physical:{000012 size:[293 (293B)] vals:[3 (3B)]}
  B000014 physical:{000014 size:[293 (293B)] vals:[3 (3B)]}
  B000016 physical:{000016 size:[293 (293B)] vals:[3 (3B)]}
  B000018 physical:{000018 size:[293 (293B)] vals:[3 (3B)]}
  B000020 physical:{000020 size:[293 (293B)] vals:[3 (3B)]}
  B000022 physical:{000022 size:[293 (293B)] vals:[3 (3B)]}
  B000024 physical:{000024 size:[293 (293B)] vals:[3 (3B)]}

# Virtual sstables metrics should be gone after the compaction.
metrics-value
num-backing
backing-size
num-virtual
num-virtual 0
virtual-size
----
0
0B
0
0
0B

metrics zero-cache-hits-misses
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0         0B |      0    0B |      0     0 |     0B     0B |   277B |      3 2.2KB |   0 68.70
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6       16KB |     18  14KB |      0     0 |    2KB     0B |   15KB |      2 1.5KB |   1  0.85
total       16KB |     18  14KB |      0     0 |    2KB     0B |  3.9KB |      5 3.6KB |   1  8.92

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |     19   15KB    4KB
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |  2.3KB    0B |     16   12KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |  2.3KB    0B |     35   31KB    4KB

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       3       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) | 223B: 277B |     24.2% |         9 |    1 (1MB) |    1 (1MB) |       500 |   2 (2.2KB)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |        0.0% |       0 (0B) |        0.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |    7 (2KB) |     0 (0B) |    21B | 100% (21B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 789B   2.3KB
           CR |         1.39
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  18    40B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  11    12B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  2  7     21B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:2323 BlockBytesInCache:451 BlockReadDuration:150ms}
                   a, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
                   b,     latency: {BlockBytes:115 BlockBytesInCache:0 BlockReadDuration:20ms}
                   c, non-latency: {BlockBytes:115 BlockBytesInCache:115 BlockReadDuration:0s}
----
----

# Create a DB where lower levels are written as shared tables. All ingests also
# become shared tables.
init shared-lower
----

batch
set a 1
set b 1
set c 1
----

flush
----
L0.0:
  000005:[a#10,SET-a#10,SET]
  000006:[b#11,SET-b#11,SET]
  000007:[c#12,SET-c#12,SET]

# One local table.
metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0      2.2KB |      3 2.2KB |      0     0 |     0B     0B |    38B |      0    0B |   1 58.97
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
total      2.2KB |      3 2.2KB |      0     0 |     0B     0B |    38B |      0    0B |   1 59.97

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.25  0.25 |      0    0B |    0B    0B    0B |     0B    0B |      3  2.2KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
total |     -     -     - |      0    0B |    0B    0B    0B |     0B    0B |      3  2.2KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       0       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   27B: 38B |     40.7% |         1 |  1 (256KB) |  1 (256KB) |        65 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |        0.0% |       0 (0B) |        0.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 108B    381B
           CR |         1.38
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
----
----

compact a-z
----
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
  000010:[c#0,SET-c#0,SET]

# Table becomes shared, so local table size becomes 0.
metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0         0B |      0    0B |      0     0 |     0B     0B |    38B |      0    0B |   0 58.97
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      2.2KB |      3 2.2KB |      0     0 |     0B     0B |  2.2KB |      0    0B |   1  1.00
total      2.2KB |      3 2.2KB |      0     0 |     0B     0B |    38B |      0    0B |   1 118.7

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      3  2.2KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |   345B    0B |      3  2.2KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |   345B    0B |      6  4.4KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       1       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   27B: 38B |     40.7% |         1 |  1 (256KB) |  1 (256KB) |        65 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |        0.0% |       0 (0B) |       50.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 108B    372B
           CR |         1.41
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:345 BlockBytesInCache:0 BlockReadDuration:30ms}
----
----

build ext1.sst
set b 2
----

ingest ext1.sst
----

metrics-value
remote-count
remote-size
----
4
2.9KB

lsm
----
L0.0:
  000011:[b#13,SET-b#13,SET]
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
  000010:[c#0,SET-c#0,SET]

# Ingest is also shared table, so local table size stays 0.
metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0       744B |      1  744B |      0     0 |     0B     0B |    38B |      1  744B |   1 58.97
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      2.2KB |      3 2.2KB |      0     0 |     0B     0B |  2.2KB |      0    0B |   1  1.00
total      2.9KB |      4 2.9KB |      0     0 |     0B     0B |   782B |      1  744B |   2  6.72

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.25  0.25 |      0    0B |    0B    0B    0B |     0B    0B |      3  2.2KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |   345B    0B |      3  2.2KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |   345B    0B |      6  5.1KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       1       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   27B: 38B |     40.7% |         1 |  1 (256KB) |  1 (256KB) |        65 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
    2 (853B) |        0.0% |       0 (0B) |       50.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
            2.9KB |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 144B    496B
           CR |         1.41
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  1     1B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  1     1B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:345 BlockBytesInCache:0 BlockReadDuration:30ms}
----
----

batch
set b 3
----

flush
----
L0.1:
  000013:[b#14,SET-b#14,SET]
L0.0:
  000011:[b#13,SET-b#13,SET]
L6:
  000008:[a#0,SET-a#0,SET]
  000009:[b#0,SET-b#0,SET]
  000010:[c#0,SET-c#0,SET]

# Local table size increases due to flush.
metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0      1.5KB |      2 1.5KB |      0     0 |     0B     0B |    74B |      1  744B |   2 40.38
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      2.2KB |      3 2.2KB |      0     0 |     0B     0B |  2.2KB |      0    0B |   1  1.00
total      3.6KB |      5 3.6KB |      0     0 |     0B     0B |   818B |      1  744B |   3  7.38

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.50  0.50 |      0    0B |    0B    0B    0B |     0B    0B |      4  2.9KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |   345B    0B |      3  2.2KB     0B
total |     -     -     - |      0    0B |    0B    0B    0B |   345B    0B |      7  5.9KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       1       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   44B: 74B |     68.2% |         2 |  1 (256KB) |  1 (256KB) |       118 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
    2 (853B) |        0.0% |       0 (0B) |       50.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
            3.6KB |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 180B    623B
           CR |          1.4
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:345 BlockBytesInCache:0 BlockReadDuration:30ms}
----
----

# Reopen DB, to ensure stats are consistent. Also, reopened DB is not
# configured to write shared tables.
init reopen
----

metrics zero-cache-hits-misses
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0      1.5KB |      2 1.5KB |      0     0 |     0B     0B |     0B |      0    0B |   2     0
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      2.2KB |      3 2.2KB |      0     0 |     0B     0B |     0B |      0    0B |   1     0
total      3.6KB |      5 3.6KB |      0     0 |     0B     0B |     0B |      0    0B |   3     0

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.50  0.50 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
total |     -     -     - |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       0       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |     0B: 0B |      0.0% |         1 |  1 (512KB) |  1 (256KB) |         0 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |        0.0% |       0 (0B) |        0.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
            3.6KB |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 180B    623B
           CR |          1.4
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
----
----

compact a-z
----
L6:
  000008:[a#0,SET-a#0,SET]
  000018:[b#0,SET-b#0,SET]
  000010:[c#0,SET-c#0,SET]

# All tables are local after compaction.
metrics zero-cache-hits-misses
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      2.2KB |      3 2.2KB |      0     0 |     0B     0B |  1.5KB |      0    0B |   1  0.50
total      2.2KB |      3 2.2KB |      0     0 |     0B     0B |     0B |      0    0B |   1     0

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |   339B    0B |      1   744B     0B
total |     -     -     - |      0    0B |    0B    0B    0B |   339B    0B |      1   744B     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       1       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |     0B: 0B |      0.0% |         1 |  1 (512KB) |  1 (256KB) |         0 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |        0.0% |       0 (0B) |        0.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes | 108B    372B
           CR |         1.41
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  3     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:339 BlockBytesInCache:0 BlockReadDuration:30ms}
----
----

init
----

batch
set a 1
set b 2
----

flush
----
L0.0:
  000005:[a#10,SET-a#10,SET]
  000006:[b#11,SET-b#11,SET]

batch
del-sized c 500
----

flush
----
L0.0:
  000005:[a#10,SET-a#10,SET]
  000006:[b#11,SET-b#11,SET]
  000008:[c#12,DELSIZED-c#12,DELSIZED]

compact a-z parallel
----
L6:
  000005:[a#10,SET-a#10,SET]
  000006:[b#11,SET-b#11,SET]
  000008:[c#12,DELSIZED-c#12,DELSIZED]

batch
del-range a c
----

flush
----
L0.0:
  000010:[a#13,RANGEDEL-b#inf,RANGEDEL]
  000011:[b#13,RANGEDEL-c#inf,RANGEDEL]
L6:
  000005:[a#10,SET-a#10,SET]
  000006:[b#11,SET-b#11,SET]
  000008:[c#12,DELSIZED-c#12,DELSIZED]

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0      1.4KB |      2 1.4KB |      0     0 |     0B     0B |   106B |      0    0B |   1 34.55
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      2.2KB |      3 2.2KB |      0     0 |     0B     0B |     0B |      0    0B |   1     0
total      3.6KB |      5 3.6KB |      0     0 |     0B     0B |   106B |      0    0B |   2 35.55

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.25  0.25 |      0    0B |    0B    0B    0B |     0B    0B |      5  3.6KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      3 2.2KB |    0B    0B    0B |     0B    0B |      0     0B     0B
total |     -     -     - |      3 2.2KB |    0B    0B    0B |     0B    0B |      5  3.7KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       0       0        0     3     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |  57B: 106B |     86.0% |         3 |  1 (256KB) |  1 (256KB) |       163 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
    2 (822B) |        0.0% |     2 (592B) |        0.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
            3.6KB |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                3 |                        0 |            502B |           1.5KB

COMPRESSION
    algorithm | none  snappy
on disk bytes | 320B    334B
           CR |         1.34
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
----
----

problem-spans
L0 [a, c)
L6 [u, v]
----

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0      1.4KB |      2 1.4KB |      0     0 |     0B     0B |   106B |      0    0B |   1 34.55
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6      2.2KB |      3 2.2KB |      0     0 |     0B     0B |     0B |      0    0B |   1     0
total      3.6KB |      5 3.6KB |      0     0 |     0B     0B |   106B |      0    0B |   2 35.55

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.25  0.25 |      0    0B |    0B    0B    0B |     0B    0B |      5  3.6KB     0B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      3 2.2KB |    0B    0B    0B |     0B    0B |      0     0B     0B
total |     -     -     - |      3 2.2KB |    0B    0B    0B |     0B    0B |      5  3.7KB     0B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       0       0        0     3     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |  57B: 106B |     86.0% |         3 |  1 (256KB) |  1 (256KB) |       163 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
    2 (822B) |        0.0% |     2 (592B) |        0.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |     0 (0B) |     0 (0B) |     0B |    0% (0B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
            3.6KB |            0 (0B) |            0 (0B) |                 0 |                2!!

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                3 |                        0 |            502B |           1.5KB

COMPRESSION
    algorithm | none  snappy
on disk bytes | 320B    334B
           CR |         1.34
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
----
----

init target-file-size=8192
----

batch
set a aaa
set b bbb
set c ccc
set d ddd
set e eee
----

flush
----
L0.0:
  000005:[a#10,SET-e#14,SET]
Blob files:
  B000006 physical:{000006 size:[309 (309B)] vals:[15 (15B)]}

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0      1.2KB |      1  884B |      0     0 |   309B     0B |    58B |      0    0B |   1 25.90
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
total      1.2KB |      1  884B |      0     0 |   309B     0B |    58B |      0    0B |   1 26.90

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.25  0.25 |      0    0B |    0B    0B    0B |     0B    0B |      1   884B   618B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
total |     -     -     - |      0    0B |    0B    0B    0B |     0B    0B |      1   942B   618B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       0       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   47B: 58B |     23.4% |         1 |  1 (256KB) |  1 (256KB) |       105 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
      0 (0B) |        0.0% |       0 (0B) |        0.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |     0 (0B) |       0 (0B local:0B) |   1 (309B) |     0 (0B) |    15B | 100% (15B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
               0B |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes |  56B    183B
           CR |         1.32
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  5     5B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  2  5     15B   0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
----
----

build ext1
set z zzz
----

ingest-and-excise ext1 excise=b-d
----

lsm
----
L0.0:
  000008(000005):[a#10,SET-a#10,SET]
  000009(000005):[d#13,SET-e#14,SET]
L6:
  000007:[z#16,SET-z#16,SET]
Blob files:
  B000006 physical:{000006 size:[309 (309B)] vals:[15 (15B)]}

metrics
----
----
LSM                             |    vtables   |   value sep   |        |   ingested   |    amp
level       size | tables  size |  count  size |  refsz valblk |     in | tables  size |   r     w
-----------------+--------------+--------------+---------------+--------+--------------+----------
    0       890B |      2  272B |      2   272 |   618B     0B |    58B |      0    0B |   1 25.90
    1         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    2         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    3         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    4         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    5         0B |      0    0B |      0     0 |     0B     0B |     0B |      0    0B |   0     0
    6       750B |      1  750B |      0     0 |     0B     0B |     0B |      1  750B |   1     0
total      1.6KB |      3   1KB |      2   272 |   618B     0B |   808B |      1  750B |   2  2.86

COMPACTIONS               |     moved    |     multilevel    |     read     |       written
level | score    ff   cff | tables  size |   top    in  read | tables  blob | tables  sstsz blobsz
------+-------------------+--------------+-------------------+--------------+---------------------
    0 |     -  0.25  0.25 |      0    0B |    0B    0B    0B |     0B    0B |      1   884B   618B
    1 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    2 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    3 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    4 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    5 |     -     0     0 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
    6 |     -  0.00  0.00 |      0    0B |    0B    0B    0B |     0B    0B |      0     0B     0B
total |     -     -     - |      0    0B |    0B    0B    0B |     0B    0B |      1  1.7KB   618B

 kind | default  delete  elision  move  read  tomb  rewrite  copy  multi  blob
count |       0       0        0     0     0     0        0     0      0     0

COMMIT PIPELINE
               wals                |              memtables              |       ingestions
    files |    written |  overhead |   flushes |       live |     zombie |     total |   flushable
----------+------------+-----------+-----------+------------+------------+-----------+------------
   1 (0B) |   47B: 58B |     23.4% |         1 |  1 (256KB) |  1 (256KB) |       105 |      0 (0B)

ITERATORS
        block cache        |         file cache         |    filter    |  sst iters  |  snapshots
     entries |    hit rate |      entries |    hit rate |         util |        open |        open
-------------+-------------+--------------+-------------+--------------+-------------+------------
   4 (1.7KB) |       11.1% |     1 (296B) |       80.0% |         0.0% |           0 |           0

FILES                 tables                       |       blob files        |     blob values
   stats prog |    backing |                zombie |       live |     zombie |  total |      refed
--------------+------------+-----------------------+------------+------------+--------+-----------
   all loaded |   1 (884B) |       0 (0B local:0B) |   1 (309B) |     0 (0B) |    15B |   27% (4B)

CGO MEMORY    |          block cache           |                     memtables
          tot |           tot |           data |            maps |            ents |           tot
--------------+---------------+----------------+-----------------+-----------------+--------------
           0B |            0B |             0B |              0B |              0B |            0B

COMPACTIONS
   estimated debt |       in progress |         cancelled |            failed |      problem spans
------------------+-------------------+-------------------+-------------------+-------------------
            1.6KB |            0 (0B) |            0 (0B) |                 0 |                  0

KEYS
      range keys |       tombstones |      missized tombstones |      point dels |      range dels
-----------------+------------------+--------------------------+-----------------+----------------
               0 |                0 |                        0 |              0B |              0B

COMPRESSION
    algorithm | none  snappy
on disk bytes |  54B    188B
           CR |         1.35
Tiering Histogram L0
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  2     2B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  2  2     4B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
Tiering Histogram L1
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L2
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L3
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L4
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L5
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
Tiering Histogram L6
sp k  n     zero  b0       b1       b2       b3       b4       b5       b6       b7       b8       b9       uf    uc
-----------------------------------------------------------------------------------------------------------------------
0  0  1     1B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B
0  1  1     3B    0:0B     8:0B     16:0B    24:0B    32:0B    40:0B    48:0B    56:0B    64:0B    72:0B    0B    0B

Iter category stats:
   pebble-compaction, non-latency: {BlockBytes:0 BlockBytesInCache:0 BlockReadDuration:0s}
       pebble-ingest,     latency: {BlockBytes:167 BlockBytesInCache:0 BlockReadDuration:20ms}
----
----

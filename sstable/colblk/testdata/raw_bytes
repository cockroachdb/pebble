# Test a simple RawBytes: a single byte slice with a single 'a' byte. Since
# it's being written at offset 0, 2 bytes of padding are inserted between the
# count of 16-bit offsets and the first offset.

build offset=0
a
----
# RawBytes
# Offsets table
0-4: x 00000000 # 32-bit constant: 0
4-5: x 00       # data[0] = 0
5-6: x 01       # data[1] = 1
# Data
6-7: x 61       # data[0]: a

# Try the same thing, but with offsets 1, 2, 3, 4.

build offset=1
a
----
00-01: x 00       # start offset
# RawBytes
# Offsets table
01-05: x 00000000 # 32-bit constant: 0
05-06: x 00       # data[0] = 0
06-07: x 00       # data[1] = 0
# Data
07-08: x 00       # data[0]: a

build offset=2
a
----
00-02: x 0000     # start offset
# RawBytes
# Offsets table
02-06: x 00000000 # 32-bit constant: 0
06-07: x 00       # data[0] = 0
07-08: x 00       # data[1] = 0
# Data
08-09: x 00       # data[0]: a

build offset=3
a
----
00-03: x 000000   # start offset
# RawBytes
# Offsets table
03-07: x 00000000 # 32-bit constant: 0
07-08: x 00       # data[0] = 0
08-09: x 00       # data[1] = 0
# Data
09-10: x 01       # data[0]: a

build offset=4
a
----
00-04: x 00000000 # start offset
# RawBytes
# Offsets table
04-08: x 00000000 # 32-bit constant: 0
08-09: x 00       # data[0] = 0
09-10: x 01       # data[1] = 1
# Data
10-11: x 61       # data[0]: a

# Create a RawBytes with two byte slices: 'a' and 'b'.

build offset=0
a
b
----
# RawBytes
# Offsets table
0-4: x 00000000 # 32-bit constant: 0
4-5: x 00       # data[0] = 0
5-6: x 01       # data[1] = 1
6-7: x 02       # data[2] = 2
# Data
7-8: x 61       # data[0]: a
8-9: x 62       # data[1]: b

build offset=0
a
ab
abc
----
# RawBytes
# Offsets table
00-04: x 00000000 # 32-bit constant: 0
04-05: x 00       # data[0] = 0
05-06: x 01       # data[1] = 1
06-07: x 03       # data[2] = 3
07-08: x 06       # data[3] = 6
# Data
08-09: x 61       # data[0]: a
09-11: x 6162     # data[1]: ab
11-14: x 616263   # data[2]: abc

build offset=0
aaabbbc
----
# RawBytes
# Offsets table
00-04: x 00000000       # 32-bit constant: 0
04-05: x 00             # data[0] = 0
05-06: x 07             # data[1] = 7
# Data
06-13: x 61616162626263 # data[0]: aaabbbc

build offset=0
a
ab
abc
----
# RawBytes
# Offsets table
00-04: x 00000000 # 32-bit constant: 0
04-05: x 00       # data[0] = 0
05-06: x 01       # data[1] = 1
06-07: x 03       # data[2] = 3
07-08: x 06       # data[3] = 6
# Data
08-09: x 61       # data[0]: a
09-11: x 6162     # data[1]: ab
11-14: x 616263   # data[2]: abc

at indices=(0, 1, 2)
----
a
ab
abc

build offset=0
cat
orange
zucchini
lemon
apple
banana
cantelope
lettuce
kale
----
# RawBytes
# Offsets table
00-04: x 00000000           # 32-bit constant: 0
04-05: x 00                 # data[0] = 0
05-06: x 03                 # data[1] = 3
06-07: x 09                 # data[2] = 9
07-08: x 11                 # data[3] = 17
08-09: x 16                 # data[4] = 22
09-10: x 1b                 # data[5] = 27
10-11: x 21                 # data[6] = 33
11-12: x 2a                 # data[7] = 42
12-13: x 31                 # data[8] = 49
13-14: x 35                 # data[9] = 53
# Data
14-17: x 636174             # data[0]: cat
17-23: x 6f72616e6765       # data[1]: orange
23-31: x 7a75636368696e69   # data[2]: zucchini
31-36: x 6c656d6f6e         # data[3]: lemon
36-41: x 6170706c65         # data[4]: apple
41-47: x 62616e616e61       # data[5]: banana
47-56: x 63616e74656c6f7065 # data[6]: cantelope
56-63: x 6c657474756365     # data[7]: lettuce
63-67: x 6b616c65           # data[8]: kale

at indices=(0, 1, 2, 3, 4, 5, 6, 7, 8)
----
cat
orange
zucchini
lemon
apple
banana
cantelope
lettuce
kale

# Only serialize the first 4 byte slices.

build offset=0 count=4
cat
orange
zucchini
lemon
apple
banana
cantelope
lettuce
kale
----
# RawBytes
# Offsets table
00-04: x 00000000         # 32-bit constant: 0
04-05: x 00               # data[0] = 0
05-06: x 03               # data[1] = 3
06-07: x 09               # data[2] = 9
07-08: x 11               # data[3] = 17
08-09: x 16               # data[4] = 22
# Data
09-12: x 636174           # data[0]: cat
12-18: x 6f72616e6765     # data[1]: orange
18-26: x 7a75636368696e69 # data[2]: zucchini
26-31: x 6c656d6f6e       # data[3]: lemon

at indices=(0, 1, 2, 3)
----
cat
orange
zucchini
lemon

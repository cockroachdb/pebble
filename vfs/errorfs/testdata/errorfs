parse-dsl
ErrInjected
(ErrInjected Reads)
(ErrInjected (PathMatch "foo/*.sst"))
(ErrInjected (OnIndex 1))
(ErrInjected (Or Reads Writes))
(ErrInjected (And (PathMatch "foo/bar/*.sst") (OnIndex 1)))
(ErrInjected (Or (OnIndex 2) (PathMatch "*.sst")))
(ErrInjected (And Reads (PathMatch "*.sst")))
(ErrInjected (Or Writes (PathMatch "*.sst")))
----
ErrInjected
(ErrInjected Reads)
(ErrInjected (PathMatch "foo/*.sst"))
(ErrInjected (OnIndex 1))
(ErrInjected (Or Reads Writes))
(ErrInjected (And (PathMatch "foo/bar/*.sst") (OnIndex 1)))
(ErrInjected (Or (OnIndex 2) (PathMatch "*.sst")))
(ErrInjected (And Reads (PathMatch "*.sst")))
(ErrInjected (Or Writes (PathMatch "*.sst")))

parse-dsl
errInjected
ErrInjected()
(ErrInjected (PathMatch foo/*.sst))
(alwoes (PathMatch "foo/*.sst"))
(ErrInjected (PathMatch "foo/*.sst" ""))
(ErrInjected PathMatch "foo/*.sst")
(ErrInjected (OnIndex ErrInjected))
(Or ErrInjected ErrInjected ErrInjected
(And ErrInjected ErrInjected ErrInjected)
(Or 1 4 5)
(ErrInjected (OnIndex foo))
(ErrInjected (OnIndex 9223372036854775807))
----
parsing err: errorfs: unknown error "errInjected"
parsing err: errorfs: unexpected token ( ("") at char 12; expected EOF
parsing err: errorfs: unexpected token IDENT ("foo") at char 25; expected STRING
parsing err: errorfs: unknown error "alwoes"
parsing err: errorfs: unexpected token STRING ("\"\"") at char 37; expected )
parsing err: errorfs: unknown predicate constant "PathMatch"
parsing err: errorfs: unexpected token IDENT ("ErrInjected") at char 23; expected INT
parsing err: errorfs: unknown error "Or"
parsing err: errorfs: unknown error "And"
parsing err: errorfs: unknown error "Or"
parsing err: errorfs: unexpected token IDENT ("foo") at char 23; expected INT
parsing err: strconv.ParseInt: parsing "9223372036854775807": value out of range

parse-dsl
(ErrInjected (OpFileReadAt _))
(ErrInjected (OpFileReadAt foo))
(ErrInjected (OpFileReadAt 1052363))
----
parsing err: errorfs: unexpected token IDENT ("_") at char 28; expected INT
parsing err: errorfs: unexpected token IDENT ("foo") at char 28; expected INT
(ErrInjected (FileReadAt 1052363))

parse-dsl
(ErrInjected (Randomly 0))
(ErrInjected (Randomly 0.1))
(ErrInjected (Randomly 0.2 18520850252))
(ErrInjected (Randomly 1.2 18520850252))
(ErrInjected (Randomly -0.3 18520850252))
(ErrInjected (Randomly 18520850252 0.25))
(ErrInjected (And (PathMatch "*.sst") (Randomly 0.05 185957252)))
(ErrInjected (And (PathMatch "*.sst") (Randomly 0.05)))
----
parsing err: errorfs: unexpected token INT ("0") at char 24; expected FLOAT
(ErrInjected (Randomly 0.10))
(ErrInjected (Randomly 0.20 18520850252))
parsing err: errorfs: Randomly proability p must be within p â‰¤ 1.0
parsing err: errorfs: unexpected token - ("") at char 24; expected FLOAT
parsing err: errorfs: unexpected token INT ("18520850252") at char 24; expected FLOAT
(ErrInjected (And (PathMatch "*.sst") (Randomly 0.05 185957252)))
(ErrInjected (And (PathMatch "*.sst") (Randomly 0.05)))

parse-dsl
(ErrInjected OpCreate)
(ErrInjected OpFileReadAt)
(ErrInjected OpOpen)
(ErrInjected (Or OpOpen OpFileRead OpFileWrite OpFileReadAt))
(ErrInjected (Not (Or OpOpen OpFileRead OpFileWrite OpFileReadAt)))
----
(ErrInjected OpCreate)
(ErrInjected OpFileReadAt)
(ErrInjected OpOpen)
(ErrInjected (Or OpOpen OpFileRead OpFileWrite OpFileReadAt))
(ErrInjected (Not (Or OpOpen OpFileRead OpFileWrite OpFileReadAt)))
